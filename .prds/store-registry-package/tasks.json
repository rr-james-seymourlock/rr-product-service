{
  "prdFilename": "store-registry-package",
  "tasks": [
    {
      "id": "1",
      "title": "Implement STORE_DOMAIN_CONFIG Map",
      "description": "Create pre-compiled Map for O(1) domain-to-config lookups with alias support",
      "status": "done",
      "priority": "high",
      "dependencies": ["5"],
      "details": "Build STORE_DOMAIN_CONFIG Map at module load. Map domain strings to full StoreConfigInterface. Include alias domains pointing to parent config. Return undefined for unknown domains.",
      "testStrategy": "Test domain lookups, alias resolution, unknown domain handling, <5Î¼s performance",
      "subtasks": [],
      "userStoryId": "US001",
      "createdAt": "2025-12-08T21:28:30.138Z",
      "updatedAt": "2025-12-08T21:29:29.926Z",
      "complexity": 3,
      "recommendedSubtasks": 2,
      "completedAt": "2025-12-08T21:29:29.926Z"
    },
    {
      "id": "2",
      "title": "Implement STORE_ID_CONFIG Map",
      "description": "Create pre-compiled Map for O(1) store ID lookups with alias support",
      "status": "done",
      "priority": "high",
      "dependencies": ["5"],
      "details": "Build STORE_ID_CONFIG Map at module load. Map store ID strings to full StoreConfigInterface. Include alias IDs pointing to parent config. ID lookup takes precedence when both domain and ID provided.",
      "testStrategy": "Test ID lookups, alias resolution, unknown ID handling, precedence over domain",
      "subtasks": [],
      "userStoryId": "US002",
      "createdAt": "2025-12-08T21:28:30.205Z",
      "updatedAt": "2025-12-08T21:29:29.954Z",
      "complexity": 3,
      "recommendedSubtasks": 2,
      "completedAt": "2025-12-08T21:29:29.954Z"
    },
    {
      "id": "3",
      "title": "Implement COMPILED_PATTERNS Map",
      "description": "Create pre-compiled Map for store ID to RegExp[] pattern lookups",
      "status": "done",
      "priority": "high",
      "dependencies": ["5"],
      "details": "Build COMPILED_PATTERNS Map at module load. Only include stores with pathnamePatterns (74 of 81). Use ts-regex-builder for ReDoS safety. All patterns have global flag. Return ReadonlyArray<RegExp>.",
      "testStrategy": "Test pattern retrieval, global flag validation, ReDoS safety checks",
      "subtasks": [],
      "userStoryId": "US003",
      "createdAt": "2025-12-08T21:28:30.265Z",
      "updatedAt": "2025-12-08T21:29:29.980Z",
      "complexity": 3,
      "recommendedSubtasks": 2,
      "completedAt": "2025-12-08T21:29:29.980Z"
    },
    {
      "id": "4",
      "title": "Implement getStoreConfig() unified lookup",
      "description": "Create unified lookup function that accepts domain or ID and returns StoreConfigInterface",
      "status": "done",
      "priority": "high",
      "dependencies": ["1", "2"],
      "details": "getStoreConfig({ domain?, id? }) returns StoreConfigInterface or undefined. ID lookup takes precedence. Uses STORE_ID_CONFIG and STORE_DOMAIN_CONFIG internally.",
      "testStrategy": "Test both lookup modes, precedence behavior, undefined returns",
      "subtasks": [],
      "userStoryId": "US001",
      "createdAt": "2025-12-08T21:28:30.325Z",
      "updatedAt": "2025-12-08T21:29:30.011Z",
      "complexity": 3,
      "recommendedSubtasks": 2,
      "completedAt": "2025-12-08T21:29:30.011Z"
    },
    {
      "id": "5",
      "title": "Define StoreConfigInterface schema",
      "description": "Create TypeScript interface for store configurations with all required and optional fields",
      "status": "done",
      "priority": "high",
      "dependencies": [],
      "details": "StoreConfigInterface: id, domain, aliases?, patternFormats?, pathnamePatterns?, searchPatterns?, transformId?. Use readonly modifiers. Export Zod schema for validation.",
      "testStrategy": "TypeScript compilation, Zod schema validation tests",
      "subtasks": [],
      "userStoryId": "US004",
      "createdAt": "2025-12-08T21:28:30.383Z",
      "updatedAt": "2025-12-08T21:29:30.045Z",
      "complexity": 2,
      "recommendedSubtasks": 2,
      "completedAt": "2025-12-08T21:29:30.045Z"
    },
    {
      "id": "6",
      "title": "Implement alias system for multi-brand merchants",
      "description": "Support domain and ID aliases that resolve to parent store configuration",
      "status": "done",
      "priority": "high",
      "dependencies": ["5", "1", "2"],
      "details": "aliases field accepts ReadonlyArray<StoreAlias> with {id, domain} pairs. Aliases share reference to parent config. Gap Inc. example with 5 aliases.",
      "testStrategy": "Test alias resolution for domains and IDs, memory efficiency verification",
      "subtasks": [],
      "userStoryId": "US005",
      "createdAt": "2025-12-08T21:28:30.444Z",
      "updatedAt": "2025-12-08T21:29:30.076Z",
      "complexity": 4,
      "recommendedSubtasks": 3,
      "completedAt": "2025-12-08T21:29:30.076Z"
    },
    {
      "id": "7",
      "title": "Implement transformId function support",
      "description": "Support optional ID transformation functions for stores with non-standard formats",
      "status": "done",
      "priority": "medium",
      "dependencies": ["5"],
      "details": "transformId field accepts (id: string) => string. Called after pattern extraction. Examples: love-scent.com, ikea.com, magneticme.com.",
      "testStrategy": "Test transformation functions, optional field handling",
      "subtasks": [],
      "userStoryId": "US006",
      "createdAt": "2025-12-08T21:28:30.503Z",
      "updatedAt": "2025-12-08T21:29:30.118Z",
      "complexity": 2,
      "recommendedSubtasks": 2,
      "completedAt": "2025-12-08T21:29:30.118Z"
    },
    {
      "id": "8",
      "title": "Optimize cold start initialization",
      "description": "Build all Maps at module load with pre-allocated arrays and imperative loops",
      "status": "done",
      "priority": "high",
      "dependencies": ["1", "2", "3"],
      "details": "Pre-allocate arrays with exact sizes. Use imperative loops to avoid intermediate allocations. Target 0.29ms for 81 stores, 5-8ms for 2,000 stores. Log build timing.",
      "testStrategy": "Measure cold start time, verify pre-allocation, benchmark at scale",
      "subtasks": [],
      "userStoryId": "US007",
      "createdAt": "2025-12-08T21:28:30.559Z",
      "updatedAt": "2025-12-08T21:29:30.149Z",
      "complexity": 4,
      "recommendedSubtasks": 3,
      "completedAt": "2025-12-08T21:29:30.149Z"
    },
    {
      "id": "9",
      "title": "Implement deep freeze for immutability",
      "description": "Deep freeze all configurations for Lambda warm container safety",
      "status": "done",
      "priority": "high",
      "dependencies": ["5"],
      "details": "Object.freeze() all StoreConfigInterface objects. Freeze nested arrays and objects. freezeStoreConfig() and freezeAlias() helpers. TypeScript readonly modifiers.",
      "testStrategy": "Test mutation attempts fail, verify all nested objects frozen",
      "subtasks": [],
      "userStoryId": "US008",
      "createdAt": "2025-12-08T21:28:30.629Z",
      "updatedAt": "2025-12-08T21:29:30.180Z",
      "complexity": 3,
      "recommendedSubtasks": 2,
      "completedAt": "2025-12-08T21:29:30.180Z"
    },
    {
      "id": "10",
      "title": "Export storeConfigs array for iteration",
      "description": "Export ReadonlyArray<StoreConfigInterface> for bulk operations",
      "status": "done",
      "priority": "medium",
      "dependencies": ["9"],
      "details": "storeConfigs export provides all 81 frozen configs. Does not affect Map lookup performance. Useful for admin tooling and bulk validation.",
      "testStrategy": "Test array iteration, verify frozen state, no mutation allowed",
      "subtasks": [],
      "userStoryId": "US009",
      "createdAt": "2025-12-08T21:28:30.686Z",
      "updatedAt": "2025-12-08T21:29:30.209Z",
      "complexity": 2,
      "recommendedSubtasks": 2,
      "completedAt": "2025-12-08T21:29:30.209Z"
    },
    {
      "id": "11",
      "title": "Comprehensive test suite",
      "description": "Create 31 tests covering lookups, edge cases, and performance verification",
      "status": "done",
      "priority": "high",
      "dependencies": ["4", "6", "8", "9"],
      "details": "31 tests for all lookup mechanisms. Performance tests verify <0.01ms average. 1000 RPS simulation <50ms. 100% coverage. O(1) verification independent of store position.",
      "testStrategy": "Vitest with coverage, performance assertions, stress tests",
      "subtasks": [],
      "userStoryId": "US010",
      "createdAt": "2025-12-08T21:28:30.761Z",
      "updatedAt": "2025-12-08T21:29:30.239Z",
      "complexity": 4,
      "recommendedSubtasks": 3,
      "completedAt": "2025-12-08T21:29:30.239Z"
    }
  ],
  "metadata": {
    "version": "1.0",
    "created": "2025-12-08T21:28:30.138Z",
    "lastUpdated": "2025-12-08T21:29:30.239Z",
    "totalTasks": 11,
    "completedTasks": 11,
    "blockedTasks": 0
  }
}
